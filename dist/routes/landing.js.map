{"version":3,"sources":["../../routes/landing.js"],"names":["express","require","router","Router","Data","User","get","req","res","find","err","data","sandroData","meti","khvedelaData","iashaData","bojaData","abuashviliData","likaData","mariData","baqroData","forEach","packs","author","fullname","pack","Object","keys","length","send","scores","sandro","khvedelidze","iasha","boja","abuashvili","lika","mari","baqro","render","post","obj","body","user","id","_id","create","result","redirect","delete","findByIdAndRemove","params","module","exports"],"mappings":"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","file":"landing.js","sourcesContent":["const express = require(\"express\");\nconst router = express.Router();\nconst Data = require(\"../models/data\");\nconst User = require('../models/user');\n\nrouter.get('/home', (req, res) => {\n  Data.find({}, function(err, data){\n     const sandroData = {meti: 0};\n     const khvedelaData = {meti: 0};\n     const iashaData = {meti: 0};\n     const bojaData = {meti: 0};\n     const abuashviliData = {meti: 0};\n     const likaData = {meti: 0};\n     const mariData = {meti: 0};\n     const baqroData = {meti: 0};\n\n     data.forEach(function (packs) {\n         if(packs.author.fullname === 'Sandro Suladze'){\n            if(packs.pack === 'METI 25'){\n              sandroData.meti = sandroData.meti + 1;\n              sandroData.data = Object.keys(data).length - sandroData.meti;\n            }\n         }\n     });\n     data.forEach(function (packs) {\n        if(packs.author.fullname === 'Davit Khvedelidze'){\n           if(packs.pack === 'METI 25'){\n              khvedelaData.meti = khvedelaData.meti + 1;\n              khvedelaData.data = Object.keys(data).length - khvedelaData.meti;\n           }\n        }\n     });\n     data.forEach(function (packs) {\n        if(packs.author.fullname === 'Salo Iashvili'){\n           if(packs.pack === 'METI 25'){\n              iashaData.meti = iashaData.meti + 1;\n              iashaData.data = Object.keys(data).length - iashaData.meti;\n           }\n        }\n     });\n     data.forEach(function (packs) {\n        if(packs.author.fullname === 'Salo Bozhadze'){\n           if(packs.pack === 'METI 25'){\n              bojaData.meti = bojaData.meti + 1;\n              bojaData.data = Object.keys(data).length - bojaData.meti;\n           }\n        }\n     });\n     data.forEach(function (packs) {\n        if(packs.author.fullname === 'Tornike Abuashvili'){\n           if(packs.pack === 'METI 25'){\n              abuashviliData.meti = abuashviliData.meti + 1;\n              abuashviliData.data = Object.keys(data).length - abuashviliData.meti;\n           }\n        }\n     });\n     data.forEach(function (packs) {\n        if(packs.author.fullname === 'Lika Maisuradze'){\n           if(packs.pack === 'METI 25'){\n              likaData.meti = likaData.meti + 1;\n              likaData.data = Object.keys(data).length - likaData.meti;\n           }\n        }\n     });\n     data.forEach(function (packs) {\n        if(packs.author.fullname === 'Mariam Misabishvili'){\n           if(packs.pack === 'METI 25'){\n              mariData.meti = mariData.meti + 1;\n              mariData.data = Object.keys(data).length - mariData.meti;\n           }\n        }\n     });\n     data.forEach(function (packs) {\n        if(packs.author.fullname === 'Tamar Bakradze'){\n           if(packs.pack === 'METI 25'){\n              baqroData.meti = baqroData.meti + 1;\n              baqroData.data = Object.keys(data).length - baqroData.meti;\n           }\n        }\n     });\n\n     if(err){\n       return res.send(err)\n         }\n           let scores = {};\n           scores.sandro = sandroData;\n           scores.khvedelidze = khvedelaData;\n           scores.iasha = iashaData;\n           scores.boja = bojaData;\n           scores.abuashvili = abuashviliData;\n           scores.lika = likaData;\n           scores.mari = mariData;\n           scores.baqro = baqroData;\n         res.render('landing', {data: data, scores: scores})\n       })\n});\n\nrouter.post('/addData', (req, res) => {\n    const obj = req.body.data;\n    obj.author = {\n        fullname: req.user.fullname,\n        id: req.user._id\n  };\n    \n    Data.create(obj, (err, result) => {\n        if(err){\n            res.send(err)\n        }else{\n            res.redirect('/home');\n        }\n    });\n});\n\n\nrouter.delete('/data-delete/:id', (req, res) => {\n    Data.findByIdAndRemove(req.params.id, (err, result) => {\n        if(err){\n            return res.send(err)\n        }\n        res.redirect('/home')\n    });\n});\n\n\nmodule.exports = router;"]}