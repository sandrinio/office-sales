{"version":3,"sources":["../../routes/auth.js"],"names":["express","require","router","Router","User","passport","get","req","res","render","post","userInfo","body","user","register","password","err","send","redirect","authenticate","successRedirect","failureRedirect","logout","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;AACA,IAAIC,OAAOH,QAAQ,gBAAR,CAAX;AACA,IAAII,WAAWJ,QAAQ,UAAR,CAAf;;AAGAC,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5BA,MAAIC,MAAJ,CAAW,OAAX;AACD,CAFD;;AAIAP,OAAOI,GAAP,CAAW,WAAX,EAAwB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAClCA,MAAIC,MAAJ,CAAW,UAAX;AACH,CAFD;;AAKAP,OAAOQ,IAAP,CAAY,WAAZ,EAAyB,UAAUH,GAAV,EAAeC,GAAf,EAAoB;AACzC,MAAIG,WAAWJ,IAAIK,IAAJ,CAASC,IAAxB;AACAT,OAAKU,QAAL,CAAcH,QAAd,EAAwBJ,IAAIK,IAAJ,CAASG,QAAjC,EAA2C,UAAUC,GAAV,EAAeH,IAAf,EAAqB;AAC9D,QAAGG,GAAH,EAAO;AACLR,UAAIS,IAAJ,CAASD,GAAT;AACD,KAFD,MAEK;AACHR,UAAIU,QAAJ,CAAa,OAAb;AACD;AACF,GAND;AAOH,CATD;;AAWAhB,OAAOQ,IAAP,CAAY,QAAZ,EAAsBL,SAASc,YAAT,CAAsB,OAAtB,EAA+B;AACnDC,mBAAiB,OADkC;AAEnDC,mBAAiB;AAFkC,CAA/B,CAAtB,EAGI,UAAUd,GAAV,EAAeC,GAAf,EAAoB;AACtBA,MAAIU,QAAJ,CAAa,GAAb;AACD,CALD;;AAOAhB,OAAOI,GAAP,CAAW,SAAX,EAAsB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACxCD,MAAIe,MAAJ;AACAd,MAAIU,QAAJ,CAAa,GAAb;AACD,CAHD;;AAKEK,OAAOC,OAAP,GAAiBtB,MAAjB","file":"auth.js","sourcesContent":["var express = require('express');\nvar router = express.Router();\nvar User = require('../models/user');\nvar passport = require(\"passport\");\n\n\nrouter.get('/', (req, res) => {\n  res.render('login');\n});\n\nrouter.get('/register', (req, res) => {\n    res.render('register');\n});\n\n\nrouter.post('/register', function (req, res) {\n    var userInfo = req.body.user;\n    User.register(userInfo, req.body.password, function (err, user) {\n      if(err){\n        res.send(err)\n      }else{\n        res.redirect('/home')\n      }\n    })\n});\n\nrouter.post(\"/login\", passport.authenticate(\"local\", {\n  successRedirect: \"/home\",\n  failureRedirect: \"/\"\n}), function (req, res) {\n  res.redirect(\"/\");\n});\n\nrouter.get(\"/logout\", function (req, res) {\n  req.logout();\n  res.redirect(\"/\");\n});\n  \n  module.exports = router;"]}